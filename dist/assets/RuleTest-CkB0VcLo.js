import{u as C,c as _,r as b,f as D,w as A,b as d,e as s,t as u,j as r,F as M,m as N,g as n,k as p,o as f,x as I,y as L}from"./vendor-CF_RhtoL.js";import{_ as R,u as z,g as B}from"./index-DVAHHVfN.js";const $={class:"rule-test-section my-4"},F={class:"text-secondary"},P={class:"row"},V={class:"card-body"},q={class:"jn-con-title card-title"},G={class:"card-text text-secondary",style:{"font-size":"10pt"}},H=["data-bs-theme"],J=["disabled"],K={key:0},O={key:1,class:"spinner-grow spinner-grow-sm bg-white","aria-hidden":"true"},Q={__name:"RuleTest",setup(U){const{t:e}=C(),v=z(),m=_(()=>v.isDarkMode),h=_(()=>v.isMobile),E=_(()=>v.lang),T=()=>({name:e("ruletest.Name"),ip:e("ruletest.StatusWait"),country_code:"",country:e("ruletest.StatusWait")}),l=b(Array.from({length:8},(o,a)=>({id:a+1,url:`ptest-${a+1}.ipcheck.ing`,...T()}))),y=b([]),g=b(l.value.length),c=b(!1),j=async(o,a)=>{try{const k=(await(await fetch(`https://${a}/cdn-cgi/trace`)).text()).split(`
`),W=k.find(i=>i.startsWith("ip=")),x=k.find(i=>i.startsWith("loc="));if(W){const i=W.split("=")[1];l.value[o].ip=i,y.value=[...y.value,i]}if(x){const i=x.split("=")[1];l.value[o].country_code=i,l.value[o].country=B(i,E.value)}}catch(t){l.value[o].ip=e("ruletest.StatusError"),l.value[o].country_code="",l.value[o].country=e("ruletest.StatusError"),console.error("Error fetching Data:",t)}},S=async(o=!1)=>{c.value=!1,o&&l.value.forEach(t=>{t.ip=e("ruletest.StatusWait"),t.country=e("ruletest.StatusWait"),t.country_code=""});const a=async t=>{if(t<g.value)try{await j(t,l.value[t].url)}catch(w){console.error("Error fetching Data:",w)}finally{a(t+1),t===g.value-1&&(c.value=!0)}};a(0)};return D(()=>{setTimeout(()=>{S()},1e3)}),A(y,()=>{v.updateAllIPs(y.value)},{deep:!0}),(o,a)=>(f(),d("div",null,[s("div",$,[s("div",F,[s("p",null,u(r(e)("ruletest.Note")),1)]),s("div",P,[(f(!0),d(M,null,N(l.value,t=>(f(),d("div",{key:t.id,class:"col-lg-3 col-md-6 col-12 mb-4"},[s("div",{class:n(["card jn-card",{"dark-mode dark-mode-border":m.value,"jn-hover-card":!h.value}])},[s("div",V,[s("p",q,[a[1]||(a[1]=s("i",{class:"bi bi-signpost-split-fill"},null,-1)),p(" "+u(t.name)+" ",1),s("i",{class:n(["bi","bi-"+t.id+"-square"])},null,2),a[2]||(a[2]=p("  "))]),s("p",G,[a[3]||(a[3]=s("i",{class:"bi bi-hdd-network-fill"},null,-1)),p(" "+u(t.url),1)]),s("p",{class:n(["card-text",{"text-info":t.ip===r(e)("ruletest.StatusWait"),"text-success":t.ip.includes(".")||t.ip.includes(":"),"text-danger":t.ip===r(e)("ruletest.StatusError")}])},[s("i",{class:n(["bi",[t.ip===r(e)("ruletest.StatusWait")?"bi-hourglass-split":"bi-pc-display-horizontal"]])}," ",2),s("span",{class:n({"jn-ip-font":t.ip.length>32})},u(t.ip),3)],2),s("div",{class:n(["alert",{"alert-info":t.country===r(e)("ruletest.StatusWait"),"alert-danger":t.country===r(e)("ruletest.StatusError"),"alert-success":t.country!==r(e)("ruletest.StatusWait")&&t.country!==r(e)("ruletest.StatusError")}]),"data-bs-theme":m.value?"dark":""},[s("i",{class:n(["bi",[t.ip===r(e)("ruletest.StatusWait")||t.ip===r(e)("ruletest.StatusError")?"bi-hourglass-split":"bi-geo-alt-fill"]])},null,2),p(" "+u(r(e)("ruletest.Country"))+": ",1),s("strong",null,u(t.country)+" ",1),I(s("span",{class:n("jn-fl fi fi-"+t.country_code.toLowerCase())},null,2),[[L,t.country_code]])],10,H)])],2)]))),128)),s("div",{class:n(["flex justify-content-center col-12",[h.value?"":"text-center mt-4"]])},[s("button",{class:n(["btn",[c.value?"btn-success":"btn-info",h.value?"w-100":"w-25"]]),disabled:!c.value,onClick:a[0]||(a[0]=t=>S(!0))},[c.value?(f(),d("span",K,[a[4]||(a[4]=s("i",{class:"bi bi-arrow-clockwise"},null,-1)),p(" "+u(r(e)("ruletest.RefreshAll")),1)])):(f(),d("span",O))],10,J)],2)])])]))}},Z=R(Q,[["__scopeId","data-v-15b508ce"]]);export{Z as default};
